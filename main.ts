controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    projectile = sprites.createProjectileFromSprite(assets.image`bullet`, mySprite, 100, 0)
})
info.onCountdownEnd(function () {
    info.changeLifeBy(-1)
    game.reset()
})
info.onLifeZero(function () {
    game.gameOver(false)
})
let projectile: Sprite = null
let statusbar: StatusBarSprite = null
let mySprite: Sprite = null
game.splash("Space Attack -R-", "Press START")
info.setLife(3)
story.showPlayerChoices("Start Game", "Options")
if (story.checkLastAnswer("Start Game")) {
    scene.setBackgroundImage(assets.image`Space`)
    mySprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . e d d d f . . . . . . . . 
        . . . e d d d f . . . . . . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . 4 4 1 1 9 9 1 7 7 7 1 1 . . . 
        . . 4 1 1 9 9 1 1 1 1 1 1 . . . 
        . . . 1 1 1 1 1 1 1 1 1 . . . . 
        . . . e d d d f . . . . . . . . 
        . . . e d d d f . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Player)
    mySprite.setPosition(0, 70)
    story.spriteMoveToLocation(mySprite, 70, 70, 100)
    music.play(music.createSong(assets.song`Cutscene1`), music.PlaybackMode.InBackground)
    story.printText("After a few hours of flying through space, you discover a mysterious planet.", 70, 70, 15, 1, story.TextSpeed.Fast)
    story.printText("But on the way there, something ambushs you. It's an huge enemy ship.", 70, 70, 15, 1, story.TextSpeed.Fast)
    game.splash("LEVEL 1: Heated Battle", "Get to the end before time's up!")
    scene.cameraShake(4, 300)
    statusbar = statusbars.create(30, 4, StatusBarKind.Health)
    statusbar.attachToSprite(mySprite)
    info.startCountdown(120)
    music.play(music.createSong(hex`0096000408040a00001c00010a006400f401640000040000000000000000000000000005000004120000000400011604000800011208000c00010d01001c000f05001202c102c20100040500280000006400280003140006020004300010001200011612001400011214001600011118001a0001121c001e00010a20002200011222002400011424002600011602001c000c960064006d019001000478002c010000640032000000000a06000506005e006000012003001c0001dc00690000045e01000400000000000000000000056400010400032a0038003a00012440004200012a42004400012744004600012468006900010d6a006b00010f6c006d00011104001c00100500640000041e000004000000000000000000000000000a0400046c0028002900012a2a002b0001292c002d0001272d002e0001252e002f00012446004800012448004a0001244a004b0001224b004c0001204c004d00011e4d004e0001204e004f00012458005a0001255a005c0001295c005e00012c72007300011274007500011276007700011205001c000f0a006400f4010a00000400000000000000000000000000000000023e000c001000010d28002c0001122c003000010a30003800012040004800011648005000010f5000580002162058006000010a60006800012778008000020c2006001c00010a006400f401640000040000000000000000000000000000000002180020002800012c6d006e0001126e006f00011670007100011407001c00020a006400f4016400000400000000000000000000000000000000037f0000000200012a02000400012a04000600012a06000800012a08000a00012c0a000c00012c0c000e00012c0e001000012c1c002000012738004000010a63006400011164006500011166006700010f68006900012769006a0001256a006b0001246b006c0001206c007000011e7500760001297600770001277700780002242508001c000e050046006603320000040a002d00000064001400013200020100026c0010001200012412001400012014001600012916001800012418001a00012231003200011232003300011133003400011134003500010f35003600010f36003700010d38003900010c3a003c0001273c003e00012a3e004000012c60006100011661006200011462006300011209010e02026400000403780000040a000301000000640001c80000040100000000640001640000040100000000fa0004af00000401c80000040a00019600000414000501006400140005010000002c0104dc00000401fa0000040a0001c8000004140005d0076400140005d0070000c800029001f40105c201f4010a0005900114001400039001000005c201f4010500058403050032000584030000fa00049001000005c201f4010500058403c80032000584030500640005840300009001049001000005c201f4010500058403c80064000584030500c8000584030000f40105ac0d000404a00f00000a0004ac0d2003010004a00f0000280004ac0d9001010004a00f0000280002d00700040408070f0064000408070000c80003c800c8000e7d00c80019000e64000f0032000e78000000fa00032c01c8000ee100c80019000ec8000f0032000edc000000fa0003f401c8000ea901c80019000e90010f0032000ea4010000fa0001c8000004014b000000c800012c01000401c8000000c8000190010004012c010000c80002c800000404c8000f0064000496000000c80002c2010004045e010f006400042c010000640002c409000404c4096400960004f6090000f40102b80b000404b80b64002c0104f40b0000f401022003000004200300040a000420030000ea01029001000004900100040a000490010000900102d007000410d0076400960010d0070000c800120070007100010a720073000106750076000108`), music.PlaybackMode.LoopingInBackground)
    info.setScore(0)
    scroller.scrollBackgroundWithCamera(scroller.CameraScrollMode.OnlyHorizontal)
    controller.moveSprite(mySprite)
} else if (story.checkLastAnswer("Options")) {
    game.splash(game.ask("Disable visual effects?"))
    if (true) {
        blockSettings.writeNumber("effects", 1)
    } else {
        blockSettings.writeNumber("effects", 0)
    }
    game.reset()
}
